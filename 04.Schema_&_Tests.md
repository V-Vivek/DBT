# Models, Schema YAML, and Tests in dbt

## 1. Models

In dbt, a **model** is a SQL file that defines a transformation. Models are typically stored in the `models/` directory and are materialized as tables or views in your data warehouse.

**Example:**
```sql
-- models/customers.sql
SELECT
    id,
    first_name,
    last_name,
    email
FROM
    raw.customers
WHERE
    is_active = TRUE
```

## 2. Schema YAML

A **schema YAML** file (`schema.yml`) is used to define metadata for your models, such as descriptions, columns, and tests. While optional, it is highly recommended for documenting your models and enabling data quality tests. The `schema.yml` file typically lives alongside your model files.

> **Note:** The schema YAML file can be named anything (for example, `customers_schema.yml`, `my_schema.yml`, etc.), as long as it is placed in the same directory as your model files and follows the correct YAML structure.

**Example:**
```yaml
# models/schema.yml
version: 2

models:
  - name: customers
    description: "Active customers with basic information"
    columns:
      - name: id
        description: "Primary key"
        tests:
          - unique
          - not_null
      - name: email
        description: "Customer email address"
        tests:
          - not_null
          - unique
```

## 3. Tests

**Tests** in dbt are assertions about your data. They can be:

#### Common Default Tests

- **unique**: Checks that all values in a column are unique.
- **not_null**: Ensures that no values in a column are null.
- **accepted_values**: Validates that all values in a column are within a specified list.
- **relationships**: Confirms that values in a column have corresponding values in another model (foreign key check).

#### Custom tests: 
- User-defined SQL queries.

**Example of a custom test:**
```yaml
tests:
    - name: customers_have_valid_email
        model: ref('customers')
        sql: |
            SELECT *
            FROM {{ model }}
            WHERE email NOT LIKE '%@%'
```

### How to run tests:
```sh
dbt test
```

## Summary Table

| Component    | Purpose                                   | Example File         |
|--------------|-------------------------------------------|----------------------|
| Model        | SQL transformation logic                  | `models/customers.sql` |
| Schema YAML  | Metadata & test definitions               | `models/schema.yml`    |
| Tests        | Data quality checks (generic/custom)      | In `schema.yml` or `tests/` |
