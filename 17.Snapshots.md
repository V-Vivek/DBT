# DBT Snapshots

DBT snapshots are used to track changes in source data over time, enabling slowly changing dimension (SCD) management. Snapshots capture and store historical records whenever data changes, allowing you to analyze how data evolves.

## Snapshot Strategies

DBT supports two main snapshot strategies:

### 1. Timestamp Strategy

This strategy detects changes based on a timestamp column (e.g., `updated_at`). DBT records a new snapshot row whenever the timestamp changes.

**Example:**

```sql
-- snapshots/customer_snapshot.sql
{% snapshot customer_snapshot %}
    {{
        config(
            target_schema='snapshots',
            unique_key='customer_id',
            strategy='timestamp',
            updated_at='updated_at'
        )
    }}
    SELECT * FROM {{ source('raw', 'customers') }}
{% endsnapshot %}
```

### 2. Check Strategy

This strategy detects changes by comparing specified columns. If any of the columns change, DBT records a new snapshot row.

**Example:**

```sql
-- snapshots/customer_snapshot.sql
{% snapshot customer_snapshot %}
    {{
        config(
            target_schema='snapshots',
            unique_key='customer_id',
            strategy='check',
            check_cols=['first_name', 'last_name', 'email']
        )
    }}
    SELECT * FROM {{ source('raw', 'customers') }}
{% endsnapshot %}
```

## Usage

- Define snapshots in the `snapshots/` directory.
- Run `dbt snapshot` to execute and update snapshots.
- Query snapshot tables to analyze historical changes.

For more details, see the [DBT documentation on snapshots](https://docs.getdbt.com/docs/build/snapshots).